<notely-sidebar>
  <nav id="sidebar">
    <button class="new-note btn btn-default" onclick={ newNote }>
      New Note
    </button>
    <ul id="notes">
      <li each={ note in notes }>
        <a class="note" href="/#/notes/{note._id}">
          { note.title }
        </a>
      </li>
    </ul>
  </nav>

  <script>
    var self = this
    self.notes = []
    $.ajax({
      url: CONSTANTS.API_BASE + 'notes',
      method: 'GET',
      headers: { 'Authorization': JSON.parse(localStorage.getItem('authToken')) }
    })
    .done(function(notes) {
      self.notes = notes
      self.update() // force riot re-render
    })

    newNote() {
      riot.route('notes')
    }
  </script>
</notely-sidebar>
